<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>递归与栈典型应用场景（二） | 大前端宝典</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <meta name="description" content="每天至少一个问题，有关前端，后端，graphql，devops，微服务以及软技能，促进个人职业成长，敲开大厂之门。">
    <link rel="preload" href="/assets/css/0.styles.49f7e903.css" as="style"><link rel="preload" href="/assets/js/app.7531da91.js" as="script"><link rel="preload" href="/assets/js/2.415acd4c.js" as="script"><link rel="preload" href="/assets/js/47.a182b1cd.js" as="script"><link rel="prefetch" href="/assets/js/10.43ed4c1e.js"><link rel="prefetch" href="/assets/js/11.8fda2a4d.js"><link rel="prefetch" href="/assets/js/12.0cce32ab.js"><link rel="prefetch" href="/assets/js/13.2cfee5e9.js"><link rel="prefetch" href="/assets/js/14.c79eb053.js"><link rel="prefetch" href="/assets/js/15.2f7adfe5.js"><link rel="prefetch" href="/assets/js/16.16b800e4.js"><link rel="prefetch" href="/assets/js/17.29dc7aa1.js"><link rel="prefetch" href="/assets/js/18.8ba5d8ed.js"><link rel="prefetch" href="/assets/js/19.9c3e386c.js"><link rel="prefetch" href="/assets/js/20.9aaf8980.js"><link rel="prefetch" href="/assets/js/21.d4bb1d1b.js"><link rel="prefetch" href="/assets/js/22.2a5112a4.js"><link rel="prefetch" href="/assets/js/23.d6bc0297.js"><link rel="prefetch" href="/assets/js/24.96611ff8.js"><link rel="prefetch" href="/assets/js/25.705e0bfd.js"><link rel="prefetch" href="/assets/js/26.1dd1074a.js"><link rel="prefetch" href="/assets/js/27.f0007ceb.js"><link rel="prefetch" href="/assets/js/28.fbded5fe.js"><link rel="prefetch" href="/assets/js/29.0b4cd4f0.js"><link rel="prefetch" href="/assets/js/3.78e75505.js"><link rel="prefetch" href="/assets/js/30.0da2fdbb.js"><link rel="prefetch" href="/assets/js/31.8fc036c2.js"><link rel="prefetch" href="/assets/js/32.5056df15.js"><link rel="prefetch" href="/assets/js/33.0f58b426.js"><link rel="prefetch" href="/assets/js/34.9615c961.js"><link rel="prefetch" href="/assets/js/35.451aeba8.js"><link rel="prefetch" href="/assets/js/36.f283c50c.js"><link rel="prefetch" href="/assets/js/37.6962af8f.js"><link rel="prefetch" href="/assets/js/38.55043a8c.js"><link rel="prefetch" href="/assets/js/39.6cdd0649.js"><link rel="prefetch" href="/assets/js/4.d4e9065e.js"><link rel="prefetch" href="/assets/js/40.d47e5e2b.js"><link rel="prefetch" href="/assets/js/41.57cee2a5.js"><link rel="prefetch" href="/assets/js/42.ec2e1dfe.js"><link rel="prefetch" href="/assets/js/43.f26d5dcd.js"><link rel="prefetch" href="/assets/js/44.26310782.js"><link rel="prefetch" href="/assets/js/45.c5fc0f11.js"><link rel="prefetch" href="/assets/js/46.e12a0604.js"><link rel="prefetch" href="/assets/js/48.7a635f3e.js"><link rel="prefetch" href="/assets/js/49.f90a58b7.js"><link rel="prefetch" href="/assets/js/5.53d6136f.js"><link rel="prefetch" href="/assets/js/50.82f93e27.js"><link rel="prefetch" href="/assets/js/51.ba7d1c67.js"><link rel="prefetch" href="/assets/js/52.a8842ee2.js"><link rel="prefetch" href="/assets/js/53.c645f725.js"><link rel="prefetch" href="/assets/js/54.39d3d526.js"><link rel="prefetch" href="/assets/js/55.e858c0b2.js"><link rel="prefetch" href="/assets/js/56.3b7772cd.js"><link rel="prefetch" href="/assets/js/57.557cde14.js"><link rel="prefetch" href="/assets/js/58.ad679eb0.js"><link rel="prefetch" href="/assets/js/59.6f1f18b1.js"><link rel="prefetch" href="/assets/js/6.0817ef18.js"><link rel="prefetch" href="/assets/js/60.3ad4f385.js"><link rel="prefetch" href="/assets/js/61.60f71673.js"><link rel="prefetch" href="/assets/js/62.073c6890.js"><link rel="prefetch" href="/assets/js/63.ee7288ee.js"><link rel="prefetch" href="/assets/js/64.a25b51c2.js"><link rel="prefetch" href="/assets/js/65.b21ffbd4.js"><link rel="prefetch" href="/assets/js/66.366eb1a3.js"><link rel="prefetch" href="/assets/js/67.01243213.js"><link rel="prefetch" href="/assets/js/68.ea9209ad.js"><link rel="prefetch" href="/assets/js/69.9c2e20b4.js"><link rel="prefetch" href="/assets/js/7.2d03e3d0.js"><link rel="prefetch" href="/assets/js/70.8e29f938.js"><link rel="prefetch" href="/assets/js/71.f7f2cf86.js"><link rel="prefetch" href="/assets/js/72.91ed7585.js"><link rel="prefetch" href="/assets/js/73.63671d5a.js"><link rel="prefetch" href="/assets/js/74.f8dc2bb6.js"><link rel="prefetch" href="/assets/js/75.c3cd2137.js"><link rel="prefetch" href="/assets/js/76.76e54944.js"><link rel="prefetch" href="/assets/js/77.6ccb9581.js"><link rel="prefetch" href="/assets/js/78.66d12a0a.js"><link rel="prefetch" href="/assets/js/79.beed177f.js"><link rel="prefetch" href="/assets/js/8.d154b590.js"><link rel="prefetch" href="/assets/js/80.cb6d9b0f.js"><link rel="prefetch" href="/assets/js/81.592a0a13.js"><link rel="prefetch" href="/assets/js/82.ee989efd.js"><link rel="prefetch" href="/assets/js/83.32818d4c.js"><link rel="prefetch" href="/assets/js/9.fd52d9d0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.49f7e903.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">大前端宝典</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/house/" class="nav-link">
  house
</a></div><div class="nav-item"><a href="/front/" class="nav-link">
  大前端
</a></div><div class="nav-item"><a href="/backend/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link router-link-active">
  数据结构与算法
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/house/" class="nav-link">
  house
</a></div><div class="nav-item"><a href="/front/" class="nav-link">
  大前端
</a></div><div class="nav-item"><a href="/backend/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link router-link-active">
  数据结构与算法
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/algorithm/" aria-current="page" class="sidebar-link">目录</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>链表及经典问题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>队列及经典问题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>递归与栈及经典问题</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/algorithm/stack/" aria-current="page" class="sidebar-link">目录</a></li><li><a href="/algorithm/stack/310.html" class="sidebar-link">递归与栈⭐️</a></li><li><a href="/algorithm/stack/311.html" class="sidebar-link">递归与栈典型应用场景（一）⭐️</a></li><li><a href="/algorithm/stack/312.html" aria-current="page" class="active sidebar-link">递归与栈典型应用场景（二）⭐️</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/algorithm/stack/312.html#场景一-验证栈序列" class="sidebar-link">场景一：验证栈序列</a></li><li class="sidebar-sub-header"><a href="/algorithm/stack/312.html#场景二-有效括号" class="sidebar-link">场景二：有效括号</a></li><li class="sidebar-sub-header"><a href="/algorithm/stack/312.html#场景三-删除最外层的括号" class="sidebar-link">场景三：删除最外层的括号</a></li><li class="sidebar-sub-header"><a href="/algorithm/stack/312.html#场景四-移除无效括号" class="sidebar-link">场景四：移除无效括号</a></li></ul></li><li><a href="/algorithm/stack/313.html" class="sidebar-link">递归与栈典型应用场景（三）⭐️</a></li><li><a href="/algorithm/stack/314.html" class="sidebar-link">递归与栈典型应用场景（四）⭐️</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>二叉树及经典问题</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="递归与栈典型应用场景-二"><a href="#递归与栈典型应用场景-二" class="header-anchor">#</a> 递归与栈典型应用场景（二）</h1> <h2 id="场景一-验证栈序列"><a href="#场景一-验证栈序列" class="header-anchor">#</a> 场景一：验证栈序列</h2> <h4 id="描述-给定-pushed-和-popped-两个序列-每个序列中的值都不重复-只有当它们可能是在最初空栈上进行的推入-push-和弹出-pop-操作序列的结果时-返回-true-否则-返回-false-。"><a href="#描述-给定-pushed-和-popped-两个序列-每个序列中的值都不重复-只有当它们可能是在最初空栈上进行的推入-push-和弹出-pop-操作序列的结果时-返回-true-否则-返回-false-。" class="header-anchor">#</a> 描述：给定 pushed 和 popped 两个序列，每个序列中的值都不重复，只有当它们可能是在最初空栈上进行的推入 push 和弹出 pop 操作序列的结果时，返回 true；否则，返回 false 。</h4> <h4 id="示例"><a href="#示例" class="header-anchor">#</a> **示例 **</h4> <div class="language-java extra-class"><pre class="language-java"><code>输入：pushed <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> popped <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>
输出：<span class="token boolean">true</span>
解释：我们可以按以下顺序执行：
<span class="token function">push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token number">4</span><span class="token punctuation">,</span>
<span class="token function">push</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token number">1</span>
</code></pre></div><h4 id="算法思路-贪心算法"><a href="#算法思路-贪心算法" class="header-anchor">#</a> 算法思路：贪心算法</h4> <ul><li>所有的元素一定是按顺序 push 进去的，重要的是思考怎么 pop 出来的;</li> <li>假设当前栈顶元素值为 2，同时对应的 popped 序列中下一个要 pop 的值也为 2，那就必须立刻把这个值 pop 出来。因为之后的 push 都会让栈顶元素变成不同于 2 的其他值，这样再 pop 出来的数 popped 序列就不对应了;</li> <li>将 pushed 队列中的每个数都 push 到栈中，同时检查这个数是不是 popped 序列中下一个要 pop 的值，如果是就把它 pop 出来;</li> <li>最后，检查是不是所有的该 pop 出来的值都 pop 出来了;</li></ul> <h4 id="代码编写如下"><a href="#代码编写如下" class="header-anchor">#</a> 代码编写如下：</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * @param {number[]} pushed
 * @param {number[]} popped
 * @return {boolean}
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">validateStackSequences</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">pushed<span class="token punctuation">,</span> popped</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//索引</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> cur <span class="token keyword">of</span> pushed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//存</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>stack<span class="token punctuation">[</span>stack<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> popped<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> stack<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//匹配弹出</span>
            stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            j<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token operator">!</span>stack<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="场景二-有效括号"><a href="#场景二-有效括号" class="header-anchor">#</a> 场景二：有效括号</h2> <h4 id="描述-给定一个只包括-的字符串-s-判断字符串是否有效。"><a href="#描述-给定一个只包括-的字符串-s-判断字符串是否有效。" class="header-anchor">#</a> 描述：给定一个只包括 '('，')'，'{'，'}'，'['，']' 的字符串 s ，判断字符串是否有效。</h4> <p>有效字符串需满足：</p> <ul><li>左括号必须用相同类型的右括号闭合。</li> <li>左括号必须以正确的顺序闭合。</li></ul> <p><strong>示例 ：</strong></p> <div class="language-visual basic extra-class"><pre class="language-text"><code>输入：s = &quot;()[]{}&quot;
输出：true
</code></pre></div><h4 id="算法思路"><a href="#算法思路" class="header-anchor">#</a> 算法思路：</h4> <ul><li>给定一个只包括 '('， ')'， '{'， '}'， '['， ']' 的字符串 s ， 判断字符串是否有效。 有效字符串需满足：左括号必须用相同类型的右括号闭合。左括号必须以正确的顺序闭合；</li> <li>我们遍历字符串s,当我们遇到一个左括号时，我们会希望在后面的字符中，有一个相同类型的右括号将其闭合;</li> <li>当我们遇到一个右括号时，我们就可以去出栈顶的左括号，判断两个括号是否能闭合。 如果不是相同类型的括号或者栈中没有括号，我们这个字符串就是无效的;</li> <li>为了能快速的判断括号的类型，我们可以创建一个Map来帮助我们。 创建一个栈来存储我们的左括号;</li> <li>最后开始遍历我们的字符串，如果是左括号，我们就将该字符加入到栈中。 如果是右括号，我们就将判断栈顶的元素和当前的元素是否能完全闭合;</li></ul> <h4 id="代码编写如下-2"><a href="#代码编写如下-2" class="header-anchor">#</a> 代码编写如下：</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 方法一使用switch case</span>
<span class="token comment">/**
 * @param {string} s
 * @return {boolean}
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">isValid</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>ch <span class="token keyword">of</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>ch<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">'('</span><span class="token operator">:</span>
      <span class="token keyword">case</span> <span class="token string">'['</span><span class="token operator">:</span>
      <span class="token keyword">case</span> <span class="token string">'{'</span><span class="token operator">:</span>
        stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span>
        <span class="token keyword">break</span>
      <span class="token keyword">case</span> <span class="token string">')'</span><span class="token operator">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">'('</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
        <span class="token keyword">break</span>
      <span class="token keyword">case</span> <span class="token string">'}'</span><span class="token operator">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">'{'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
        <span class="token keyword">break</span>
      <span class="token keyword">case</span> <span class="token string">']'</span><span class="token operator">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">'['</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
        <span class="token keyword">break</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token operator">!</span>stack<span class="token punctuation">.</span>length
<span class="token punctuation">}</span>
</code></pre></div><h4 id="方法二-使用map"><a href="#方法二-使用map" class="header-anchor">#</a> 方法二：使用Map</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * @param {string} s
 * @return {boolean}
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">isValid</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> n <span class="token operator">=</span> s<span class="token punctuation">.</span>length
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">')'</span><span class="token punctuation">,</span> <span class="token string">'('</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">']'</span><span class="token punctuation">,</span> <span class="token string">'['</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">'}'</span><span class="token punctuation">,</span> <span class="token string">'{'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>ch <span class="token keyword">of</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>stack<span class="token punctuation">.</span>length <span class="token operator">||</span> stack<span class="token punctuation">[</span>stack<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!==</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
      stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> stack<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="场景三-删除最外层的括号"><a href="#场景三-删除最外层的括号" class="header-anchor">#</a> 场景三：删除最外层的括号</h2> <h4 id="描述-有效括号字符串为空-、-a-或-a-b-其中-a-和-b-都是有效的括号字符串-代表字符串的连接。例如-和-都是有效的括号字符串。"><a href="#描述-有效括号字符串为空-、-a-或-a-b-其中-a-和-b-都是有效的括号字符串-代表字符串的连接。例如-和-都是有效的括号字符串。" class="header-anchor">#</a> 描述：有效括号字符串为空 (&quot;&quot;)、&quot;(&quot; + A + &quot;)&quot; 或 A + B，其中 A 和 B 都是有效的括号字符串，+ 代表字符串的连接。例如，&quot;&quot;，&quot;()&quot;，&quot;(())()&quot; 和 &quot;(()(()))&quot; 都是有效的括号字符串。</h4> <p><strong>如果有效字符串 S 非空，且不存在将其拆分为 S = A+B 的方法，我们称其为原语（primitive），其中 A 和 B 都是非空有效括号字符串。</strong></p> <p><strong>给出一个非空有效字符串 S，考虑将其进行原语化分解，使得：S = P_1 + P_2 + ... + P_k，其中 P_i 是有效括号字符串原语。</strong></p> <p><strong>对 S 进行原语化分解，删除分解中每个原语字符串的最外层括号，返回 S 。</strong></p> <h4 id="示例-2"><a href="#示例-2" class="header-anchor">#</a> 示例：</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code>输入：<span class="token string">&quot;(()())(())(()(()))&quot;</span>
输出：<span class="token string">&quot;()()()()(())&quot;</span>
解释：
输入字符串为 <span class="token string">&quot;(()())(())(()(()))&quot;</span>，原语化分解得到 <span class="token string">&quot;(()())&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;(())&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;(()(()))&quot;</span>，
删除每个部分中的最外层括号后得到 <span class="token string">&quot;()()&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;()&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;()(())&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;()()()()(())&quot;</span>。
</code></pre></div><h4 id="算法思路-2"><a href="#算法思路-2" class="header-anchor">#</a> 算法思路：</h4> <ul><li>首先我们解决这道题的关键在于需要知道哪些是需要去除的外层括号；</li> <li>为了找到这些需要去除的外层括号，我们需要用到计数器；</li> <li>遇到左括号，我们的计数器 +1,遇到右括号，我们的计数器 -1，这样，一对有效保留的括号，总共让计数器归零，若不归零，则代表当前遍历到的括号中，一定存在多余括号;</li> <li>最后的规律就是：遇到左括号，当前计数值大于 0，则属于有效的左括号；遇到右括号，当前计数值大于 1，则属于有效的右括号;</li></ul> <h4 id="代码编写如下-3"><a href="#代码编写如下-3" class="header-anchor">#</a> 代码编写如下：</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * @param {string} S
 * @return {string}
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">removeOuterParentheses</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token constant">S</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> opened <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>ch <span class="token keyword">of</span> <span class="token constant">S</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// opend &gt;0 我们已经有了一个左括号</span>
        <span class="token comment">//我们新找到的这个左括号，就认为他不是最外层的括号，就给他拼接起来，然后这个数量进行加一；</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ch <span class="token operator">===</span> <span class="token string">'('</span> <span class="token operator">&amp;&amp;</span> opened<span class="token operator">++</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> res <span class="token operator">+=</span> ch<span class="token punctuation">;</span>
        <span class="token comment">// opend &gt;1 我们已经有了两个及以上左括号</span>
        <span class="token comment">//我们新找到的这个右括号，就认为他不是最外层的括号，就给他拼接起来，然后这个左括号的数量进行减一；</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ch <span class="token operator">===</span> <span class="token string">')'</span> <span class="token operator">&amp;&amp;</span> opened<span class="token operator">--</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> res <span class="token operator">+=</span> ch<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="场景四-移除无效括号"><a href="#场景四-移除无效括号" class="header-anchor">#</a> 场景四：移除无效括号</h2> <h4 id="描述-给你一个由-、-和小写字母组成的字符串-s。"><a href="#描述-给你一个由-、-和小写字母组成的字符串-s。" class="header-anchor">#</a> 描述：给你一个由 '('、')' 和小写字母组成的字符串 s。</h4> <p>你需要从字符串中删除最少数目的 '(' 或者 ')' （可以删除任意位置的括号)，使得剩下的「括号字符串」有效。</p> <p>请返回任意一个合法字符串。</p> <p>有效「括号字符串」应当符合以下 任意一条 要求：</p> <ul><li>空字符串或只包含小写字母的字符串、</li> <li>可以被写作 AB（A 连接 B）的字符串，其中 A 和 B 都是有效「括号字符串」</li> <li>可以被写作 (A) 的字符串，其中 A 是一个有效的「括号字符串」</li></ul> <h4 id="示例-3"><a href="#示例-3" class="header-anchor">#</a> 示例：</h4> <div class="language-visual basic extra-class"><pre class="language-text"><code>输入：s = &quot;lee(t(c)o)de)&quot;
输出：&quot;lee(t(c)o)de&quot;
解释：&quot;lee(t(co)de)&quot; , &quot;lee(t(c)ode)&quot; 也是一个可行答案。
</code></pre></div><h4 id="算法思路-3"><a href="#算法思路-3" class="header-anchor">#</a> 算法思路：</h4> <ul><li>首先分析 有效 字符串的含义；</li> <li>当且仅当 满足以下条件时，字符串中的括号是平衡的：
<ul><li>字符串中有相同数量的 &quot;(&quot; 和 &quot;)&quot;；</li> <li>从左至右遍历字符串，统计当前 &quot;(&quot; 和 &quot;)&quot; 的数量，永远不会出现 &quot;)&quot; 的数量大于 &quot;(&quot; 的数量，称 count(&quot;(&quot;) - count(&quot;)&quot;) 为字符串的余量。</li></ul></li> <li>从左向右扫描字符串，每次遇到 &quot;(&quot; 时，余量递增，遇到 &quot;)&quot; 时，余量递减；</li> <li>在任何时候如果余量为负（&quot;)&quot; 的数量多于 &quot;(&quot;），则返回 false；</li> <li>如果扫描到字符串末尾时余量为 0，说明 &quot;)&quot; 的数量等于 &quot;(&quot; 的数量，返回 true；</li></ul> <h4 id="代码实现如下"><a href="#代码实现如下" class="header-anchor">#</a> 代码实现如下：</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * @param {string} s
 * @return {string}
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">minRemoveToMakeValid</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 记录需要删除的多余括号的索引</span>
  <span class="token comment">// leftDel, rightDel分别存放'(', ')'</span>
  <span class="token keyword">const</span> n <span class="token operator">=</span> s<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
    leftDel <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    rightDel <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> char <span class="token operator">=</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>char <span class="token operator">===</span> <span class="token string">'('</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      leftDel<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>char <span class="token operator">===</span> <span class="token string">')'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果有对应的'(', 从删除列表中移除</span>
      <span class="token comment">// 否则')'是多余的，加入右括号的删除列表</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>leftDel<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        leftDel<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        rightDel<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 根据记录删除</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>s<span class="token punctuation">]</span><span class="token punctuation">,</span>
    filter <span class="token operator">=</span> leftDel<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>rightDel<span class="token punctuation">)</span><span class="token punctuation">,</span>
    l <span class="token operator">=</span> filter<span class="token punctuation">.</span>length
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">[</span>filter<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">''</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/31/2021, 12:51:55 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/algorithm/stack/311.html" class="prev">
        递归与栈典型应用场景（一）⭐️
      </a></span> <span class="next"><a href="/algorithm/stack/313.html">
        递归与栈典型应用场景（三）⭐️
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7531da91.js" defer></script><script src="/assets/js/2.415acd4c.js" defer></script><script src="/assets/js/47.a182b1cd.js" defer></script>
  </body>
</html>

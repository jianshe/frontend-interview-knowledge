<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>安装Docker到服务器 | 大前端宝典</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <meta name="description" content="每天至少一个问题，有关前端，后端，graphql，devops，微服务以及软技能，促进个人职业成长，敲开大厂之门。">
    <link rel="preload" href="/assets/css/0.styles.49f7e903.css" as="style"><link rel="preload" href="/assets/js/app.8d512a3d.js" as="script"><link rel="preload" href="/assets/js/2.0cbf04c0.js" as="script"><link rel="preload" href="/assets/js/37.f378c9ed.js" as="script"><link rel="prefetch" href="/assets/js/10.f06e8e69.js"><link rel="prefetch" href="/assets/js/11.5dc8fc84.js"><link rel="prefetch" href="/assets/js/12.9700e769.js"><link rel="prefetch" href="/assets/js/13.818433f2.js"><link rel="prefetch" href="/assets/js/14.4b73392b.js"><link rel="prefetch" href="/assets/js/15.4b80b924.js"><link rel="prefetch" href="/assets/js/16.e8826023.js"><link rel="prefetch" href="/assets/js/17.ceb2ff6c.js"><link rel="prefetch" href="/assets/js/18.c98a6503.js"><link rel="prefetch" href="/assets/js/19.2acfebe4.js"><link rel="prefetch" href="/assets/js/20.bc2b53de.js"><link rel="prefetch" href="/assets/js/21.3d80ce8f.js"><link rel="prefetch" href="/assets/js/22.ab8986dd.js"><link rel="prefetch" href="/assets/js/23.fe431fab.js"><link rel="prefetch" href="/assets/js/24.4ab64671.js"><link rel="prefetch" href="/assets/js/25.0521e884.js"><link rel="prefetch" href="/assets/js/26.18f20a1a.js"><link rel="prefetch" href="/assets/js/27.914873e8.js"><link rel="prefetch" href="/assets/js/28.6f549e00.js"><link rel="prefetch" href="/assets/js/29.87665ea3.js"><link rel="prefetch" href="/assets/js/3.4d53a9ca.js"><link rel="prefetch" href="/assets/js/30.0e91ffcd.js"><link rel="prefetch" href="/assets/js/31.0f16c7f0.js"><link rel="prefetch" href="/assets/js/32.6c952817.js"><link rel="prefetch" href="/assets/js/33.aab2ecad.js"><link rel="prefetch" href="/assets/js/34.05fe456d.js"><link rel="prefetch" href="/assets/js/35.6217fd59.js"><link rel="prefetch" href="/assets/js/36.1fb82836.js"><link rel="prefetch" href="/assets/js/38.8a0a3f9b.js"><link rel="prefetch" href="/assets/js/39.f61d6dad.js"><link rel="prefetch" href="/assets/js/4.18a0a7d7.js"><link rel="prefetch" href="/assets/js/40.e2bdcc34.js"><link rel="prefetch" href="/assets/js/41.f19301ce.js"><link rel="prefetch" href="/assets/js/42.709371fa.js"><link rel="prefetch" href="/assets/js/43.def36529.js"><link rel="prefetch" href="/assets/js/44.d291d141.js"><link rel="prefetch" href="/assets/js/45.dcbd485e.js"><link rel="prefetch" href="/assets/js/46.9f1a8d86.js"><link rel="prefetch" href="/assets/js/47.f2d6c29c.js"><link rel="prefetch" href="/assets/js/48.87945055.js"><link rel="prefetch" href="/assets/js/49.1d08d1e0.js"><link rel="prefetch" href="/assets/js/5.2bef628f.js"><link rel="prefetch" href="/assets/js/50.e6b88cad.js"><link rel="prefetch" href="/assets/js/51.35903217.js"><link rel="prefetch" href="/assets/js/52.e94c0127.js"><link rel="prefetch" href="/assets/js/53.6cc5a36c.js"><link rel="prefetch" href="/assets/js/54.75b9ab86.js"><link rel="prefetch" href="/assets/js/55.a83a3f62.js"><link rel="prefetch" href="/assets/js/56.4001183e.js"><link rel="prefetch" href="/assets/js/57.a8bdf45b.js"><link rel="prefetch" href="/assets/js/58.48467547.js"><link rel="prefetch" href="/assets/js/59.7a75fcb4.js"><link rel="prefetch" href="/assets/js/6.0a31e20e.js"><link rel="prefetch" href="/assets/js/60.d0a70868.js"><link rel="prefetch" href="/assets/js/61.3a22f1d6.js"><link rel="prefetch" href="/assets/js/7.6e4151f9.js"><link rel="prefetch" href="/assets/js/8.6cac6dce.js"><link rel="prefetch" href="/assets/js/9.fa6b31e4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.49f7e903.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">大前端宝典</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/house/" class="nav-link">
  house
</a></div><div class="nav-item"><a href="/front/" class="nav-link">
  大前端
</a></div><div class="nav-item"><a href="/backend/" class="nav-link router-link-active">
  后端
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  数据结构与算法
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/house/" class="nav-link">
  house
</a></div><div class="nav-item"><a href="/front/" class="nav-link">
  大前端
</a></div><div class="nav-item"><a href="/backend/" class="nav-link router-link-active">
  后端
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  数据结构与算法
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/backend/" aria-current="page" class="sidebar-link">目录</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>server</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/server/" aria-current="page" class="sidebar-link">目录</a></li><li><a href="/backend/server/51.html" aria-current="page" class="active sidebar-link">安装Docker到服务器⭐️</a></li><li><a href="/backend/server/52.html" class="sidebar-link">CentOS安装NodeJS⭐️</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>node</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="安装docker到服务器"><a href="#安装docker到服务器" class="header-anchor">#</a> 安装Docker到服务器</h1> <blockquote><p>前端开发人员基本上都会写前端项目和node后端服务，但如何将代码部署到服务器，相信不是每一位开发人员都会的，下面，针对不同的操作系统，分别讲解，如何部署项目到远端服务器</p></blockquote> <p>目前接触的服务器类型大约有两种：</p> <ul><li>Ubuntu 18.04 64位</li> <li>CentOS 8.0 64位</li></ul> <p>​	<strong>不同的服务器，部署方式有所不同。</strong></p> <p>针对Ubuntu 18.04 64位阿里云服务器先安装Docker</p> <ol><li><p>申请并连接远端服务器。</p></li> <li><p>升级apt和添加相关软件包。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code># apt升级
sudo apt<span class="token operator">-</span><span class="token keyword">get</span> update
# 添加相关软件包
sudo apt<span class="token operator">-</span><span class="token keyword">get</span> install \
apt<span class="token operator">-</span>transport<span class="token operator">-</span>https \
ca<span class="token operator">-</span>certificates \
curl \
software<span class="token operator">-</span>properties<span class="token operator">-</span>common
</code></pre></div></li> <li><p>下载软件包的合法性，需要添加软件源的 GPG 密钥。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>curl <span class="token operator">-</span>fsSL https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>ustc<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>docker<span class="token operator">-</span>ce<span class="token operator">/</span>linux<span class="token operator">/</span>ubuntu<span class="token operator">/</span>gpg <span class="token operator">|</span> sudo apt<span class="token operator">-</span>key add <span class="token operator">-</span>
</code></pre></div></li> <li><p>source.list 中添加 Docker 软件源。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>sudo add<span class="token operator">-</span>apt<span class="token operator">-</span>repository \
<span class="token string">&quot;deb [arch=amd64] https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu \
$(lsb_release -cs) \
stable&quot;</span>
</code></pre></div></li> <li><p>安装 Docker CE。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>sudo apt<span class="token operator">-</span><span class="token keyword">get</span> update
sudo apt<span class="token operator">-</span><span class="token keyword">get</span> install docker<span class="token operator">-</span>ce
</code></pre></div></li> <li><p>启动 Docker CE。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>sudo systemctl enable docker
sudo systemctl start docker
</code></pre></div></li> <li><p>建立 docker 用户组(附加) 。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>sudo groupadd docker
sudo usermod <span class="token operator">-</span>aG docker $<span class="token constant">USER</span>
</code></pre></div></li> <li><p>Helloworld 测试</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>docker run hello<span class="token operator">-</span>world
</code></pre></div></li> <li><p>docker 拉取镜像时，可以设置镜像进行加速。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code># <span class="token operator">/</span>etc<span class="token operator">/</span>docker<span class="token operator">/</span>daemon<span class="token punctuation">.</span>json
<span class="token punctuation">{</span>
<span class="token string">&quot;registry-mirrors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
<span class="token string">&quot;https://dockerhub.azk8s.cn&quot;</span><span class="token punctuation">,</span> 
<span class="token string">&quot;https://reg-mirror.qiniu.com&quot;</span> <span class="token comment">// 七牛云加速器</span>
<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
sudo systemctl daemon<span class="token operator">-</span>reload
sudo systemctl restart docker
</code></pre></div><p><strong>针对CentOS 8.0 64位腾讯云服务器 Docker安装</strong></p> <p><strong>安装脚本自动安装</strong></p> <p>安装命令如下：</p> <div class="language- extra-class"><pre class="language-text"><code>curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun
</code></pre></div><p>也可以使用国内 daocloud 一键安装命令：</p> <div class="language- extra-class"><pre class="language-text"><code>curl -sSL https://get.daocloud.io/docker | sh
</code></pre></div><p><strong>手动安装</strong></p> <p>1.卸载旧版已安装docker如果有。</p> <p>较旧的 Docker 版本称为 docker 或 docker-engine 。如果已安装这些程序，请卸载它们以及相关的依赖项。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>sudo yum remove docker \
                  docker<span class="token operator">-</span>client \
                  docker<span class="token operator">-</span>client<span class="token operator">-</span>latest \
                  docker<span class="token operator">-</span>common \
                  docker<span class="token operator">-</span>latest \
                  docker<span class="token operator">-</span>latest<span class="token operator">-</span>logrotate \
                  docker<span class="token operator">-</span>logrotate \
                  docker<span class="token operator">-</span>engine
</code></pre></div><p>2.安装 Docker Engine-Community</p> <p>在新主机上首次安装 Docker Engine-Community 之前，需要设置 Docker 仓库。之后，您可以从仓库安装和更新 Docker。</p> <p><strong>设置仓库</strong></p> <p>安装所需的软件包。yum-utils 提供了 yum-config-manager ，并且 device mapper 存储驱动程序需要 device-mapper-persistent-data 和 lvm2。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>sudo yum install <span class="token operator">-</span>y yum<span class="token operator">-</span>utils \
  device<span class="token operator">-</span>mapper<span class="token operator">-</span>persistent<span class="token operator">-</span>data \
  lvm2
</code></pre></div><p>使用以下命令来设置稳定的仓库。</p> <h5 id="使用官方源地址-比较慢"><a href="#使用官方源地址-比较慢" class="header-anchor">#</a> 使用官方源地址（比较慢）</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code>sudo yum<span class="token operator">-</span>config<span class="token operator">-</span>manager \
    <span class="token operator">--</span>add<span class="token operator">-</span>repo \
    https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>download<span class="token punctuation">.</span>docker<span class="token punctuation">.</span>com<span class="token operator">/</span>linux<span class="token operator">/</span>centos<span class="token operator">/</span>docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>repo
</code></pre></div><p>可以选择国内的一些源地址：</p> <h5 id="阿里云"><a href="#阿里云" class="header-anchor">#</a> 阿里云</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code>sudo yum<span class="token operator">-</span>config<span class="token operator">-</span>manager \
    <span class="token operator">--</span>add<span class="token operator">-</span>repo \
    http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com<span class="token operator">/</span>docker<span class="token operator">-</span>ce<span class="token operator">/</span>linux<span class="token operator">/</span>centos<span class="token operator">/</span>docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>repo
</code></pre></div><h5 id="清华大学源"><a href="#清华大学源" class="header-anchor">#</a> 清华大学源</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code>sudo yum<span class="token operator">-</span>config<span class="token operator">-</span>manager \
    <span class="token operator">--</span>add<span class="token operator">-</span>repo \
    https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>docker<span class="token operator">-</span>ce<span class="token operator">/</span>linux<span class="token operator">/</span>centos<span class="token operator">/</span>docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>repo
</code></pre></div><h5 id="安装-docker-engine-community"><a href="#安装-docker-engine-community" class="header-anchor">#</a> 安装 Docker Engine-Community</h5> <p>安装最新版本的 Docker Engine-Community 和 containerd，或者转到下一步安装特定版本：</p> <div class="language- extra-class"><pre class="language-text"><code>sudo yum install docker-ce docker-ce-cli containerd.io
</code></pre></div><p>如果提示您接受 GPG 密钥，请选是。</p> <blockquote><p><strong>有多个 Docker 仓库吗？</strong></p> <p>如果启用了多个 Docker 仓库，则在未在 yum install 或 yum update 命令中指定版本的情况下，进行的安装或更新将始终安装最高版本，这可能不适合您的稳定性需求。</p></blockquote> <p>Docker 安装完默认未启动。并且已经创建好 docker 用户组，但该用户组下没有用户。</p> <p><strong>要安装特定版本的 Docker Engine-Community，请在存储库中列出可用版本，然后选择并安装：</strong></p> <p>1、列出并排序您存储库中可用的版本。此示例按版本号（从高到低）对结果进行排序。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>yum list docker<span class="token operator">-</span>ce <span class="token operator">--</span>showduplicates <span class="token operator">|</span> sort <span class="token operator">-</span>r
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64  <span class="token number">3</span><span class="token operator">:</span><span class="token number">18.09</span><span class="token number">.1</span><span class="token operator">-</span><span class="token number">3.</span>el7                     docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64  <span class="token number">3</span><span class="token operator">:</span><span class="token number">18.09</span><span class="token number">.0</span><span class="token operator">-</span><span class="token number">3.</span>el7                     docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64  <span class="token number">18.06</span><span class="token number">.1</span><span class="token punctuation">.</span>ce<span class="token operator">-</span><span class="token number">3.</span>el7                    docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64  <span class="token number">18.06</span><span class="token number">.0</span><span class="token punctuation">.</span>ce<span class="token operator">-</span><span class="token number">3.</span>el7                    docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable
</code></pre></div><p>2、通过其完整的软件包名称安装特定版本，该软件包名称是软件包名称（docker-ce）加上版本字符串（第二列），从第一个冒号（:）一直到第一个连字符，并用连字符（-）分隔。例如：docker-ce-18.09.1。</p> <div class="language- extra-class"><pre class="language-text"><code>sudo yum install docker-ce-&lt;VERSION_STRING&gt; docker-ce-cli-&lt;VERSION_STRING&gt; containerd.io
</code></pre></div><p>启动 Docker。</p> <div class="language- extra-class"><pre class="language-text"><code>sudo systemctl start docker
</code></pre></div><p>通过运行 hello-world 映像来验证是否正确安装了 Docker Engine-Community 。</p> <div class="language- extra-class"><pre class="language-text"><code>sudo docker run hello-world
</code></pre></div><p>docker 拉取镜像时，可以设置镜像进行加速。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
<span class="token string">&quot;registry-mirrors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;https://r9xxm8z8.mirror.aliyuncs.com&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;https://registry.docker-cn.com&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token string">&quot;insecure-registries&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;172.16.213.38:5000&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;172.16.213.39:5000&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样就可以同时使用公有和私有镜像仓库</p> <p>重启docker</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>systemctl restart docker<span class="token punctuation">.</span>service #重启Docker 即可
</code></pre></div></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/23/2021, 1:02:48 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/backend/server/" class="prev router-link-active">
        目录
      </a></span> <span class="next"><a href="/backend/server/52.html">
        CentOS安装NodeJS⭐️
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8d512a3d.js" defer></script><script src="/assets/js/2.0cbf04c0.js" defer></script><script src="/assets/js/37.f378c9ed.js" defer></script>
  </body>
</html>

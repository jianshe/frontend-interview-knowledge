<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Element-ui源码解析之button组件 | 大前端宝典</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <meta name="description" content="每天至少一个问题，有关前端，后端，graphql，devops，微服务以及软技能，促进个人职业成长，敲开大厂之门。">
    <link rel="preload" href="/assets/css/0.styles.49f7e903.css" as="style"><link rel="preload" href="/assets/js/app.8798bf52.js" as="script"><link rel="preload" href="/assets/js/2.309d842d.js" as="script"><link rel="preload" href="/assets/js/21.1dd47ea9.js" as="script"><link rel="prefetch" href="/assets/js/10.3c87c56f.js"><link rel="prefetch" href="/assets/js/11.68a71fb5.js"><link rel="prefetch" href="/assets/js/12.ae4cb11c.js"><link rel="prefetch" href="/assets/js/13.973b8910.js"><link rel="prefetch" href="/assets/js/14.f0617c0d.js"><link rel="prefetch" href="/assets/js/15.76606388.js"><link rel="prefetch" href="/assets/js/16.5283538a.js"><link rel="prefetch" href="/assets/js/17.406efa57.js"><link rel="prefetch" href="/assets/js/18.4ba83be1.js"><link rel="prefetch" href="/assets/js/19.a8b0bf97.js"><link rel="prefetch" href="/assets/js/20.6e63fae1.js"><link rel="prefetch" href="/assets/js/22.6bcf0540.js"><link rel="prefetch" href="/assets/js/23.3484870e.js"><link rel="prefetch" href="/assets/js/24.6cf1aed4.js"><link rel="prefetch" href="/assets/js/25.cbe880a4.js"><link rel="prefetch" href="/assets/js/26.9b43c128.js"><link rel="prefetch" href="/assets/js/27.9d7643d5.js"><link rel="prefetch" href="/assets/js/28.141ef07a.js"><link rel="prefetch" href="/assets/js/29.b5e89cdc.js"><link rel="prefetch" href="/assets/js/3.ef859757.js"><link rel="prefetch" href="/assets/js/30.82eba3bc.js"><link rel="prefetch" href="/assets/js/31.adfa0a77.js"><link rel="prefetch" href="/assets/js/32.f1e5c90f.js"><link rel="prefetch" href="/assets/js/33.e2b8c944.js"><link rel="prefetch" href="/assets/js/34.83770c85.js"><link rel="prefetch" href="/assets/js/35.8e4926de.js"><link rel="prefetch" href="/assets/js/36.0a740388.js"><link rel="prefetch" href="/assets/js/37.b3475a62.js"><link rel="prefetch" href="/assets/js/38.5db03092.js"><link rel="prefetch" href="/assets/js/39.28eb170e.js"><link rel="prefetch" href="/assets/js/4.57acf39a.js"><link rel="prefetch" href="/assets/js/40.33a385cf.js"><link rel="prefetch" href="/assets/js/41.f5a9f6af.js"><link rel="prefetch" href="/assets/js/42.76a55904.js"><link rel="prefetch" href="/assets/js/43.77c5035b.js"><link rel="prefetch" href="/assets/js/44.52c8afcf.js"><link rel="prefetch" href="/assets/js/45.6a8a58ae.js"><link rel="prefetch" href="/assets/js/46.2fdc129d.js"><link rel="prefetch" href="/assets/js/47.fd34e7f6.js"><link rel="prefetch" href="/assets/js/48.e373fbdf.js"><link rel="prefetch" href="/assets/js/49.b231f050.js"><link rel="prefetch" href="/assets/js/5.ed301b0f.js"><link rel="prefetch" href="/assets/js/50.52ed4176.js"><link rel="prefetch" href="/assets/js/51.14349411.js"><link rel="prefetch" href="/assets/js/52.92f59d36.js"><link rel="prefetch" href="/assets/js/53.a028abae.js"><link rel="prefetch" href="/assets/js/54.709613a3.js"><link rel="prefetch" href="/assets/js/55.8e0ac6cb.js"><link rel="prefetch" href="/assets/js/56.78719ada.js"><link rel="prefetch" href="/assets/js/57.66241bf9.js"><link rel="prefetch" href="/assets/js/58.87e805cf.js"><link rel="prefetch" href="/assets/js/59.b5817bc8.js"><link rel="prefetch" href="/assets/js/6.508e8cfe.js"><link rel="prefetch" href="/assets/js/60.dcb48517.js"><link rel="prefetch" href="/assets/js/61.0ec2bc3f.js"><link rel="prefetch" href="/assets/js/62.243e9173.js"><link rel="prefetch" href="/assets/js/63.1e6b57f6.js"><link rel="prefetch" href="/assets/js/64.686e190f.js"><link rel="prefetch" href="/assets/js/65.dcfa0c9c.js"><link rel="prefetch" href="/assets/js/66.7c4c8c52.js"><link rel="prefetch" href="/assets/js/67.ab561920.js"><link rel="prefetch" href="/assets/js/7.68a44e2e.js"><link rel="prefetch" href="/assets/js/8.604f05e5.js"><link rel="prefetch" href="/assets/js/9.e5672357.js">
    <link rel="stylesheet" href="/assets/css/0.styles.49f7e903.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">大前端宝典</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/house/" class="nav-link">
  house
</a></div><div class="nav-item"><a href="/front/" class="nav-link router-link-active">
  大前端
</a></div><div class="nav-item"><a href="/backend/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  数据结构与算法
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/house/" class="nav-link">
  house
</a></div><div class="nav-item"><a href="/front/" class="nav-link router-link-active">
  大前端
</a></div><div class="nav-item"><a href="/backend/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  数据结构与算法
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/front/" aria-current="page" class="sidebar-link">目录</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>css3</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>element</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/front/element/" aria-current="page" class="sidebar-link">目录</a></li><li><a href="/front/element/100.html" aria-current="page" class="active sidebar-link">Element-ui源码解析之button组件⭐️</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="element-ui源码解析之button组件"><a href="#element-ui源码解析之button组件" class="header-anchor">#</a> Element-ui源码解析之button组件</h1> <h4 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h4> <p>我们肯定都想通过看组件库的源码（本章以Element为例）来拔高自己的水平，也肯定都尝试过，只是最终都不了了之罢了，这很正常，我也是这样的，其实对于功底一般的我们来说，看源码是需要方法和时间的：关于时间，我想每个星期看一个组件就足以（不用全部看完，挑着看就行），看自己安排；关于方法就是我接下来主要讲解的，这里以button组件为例 （因为它最简单实用），希望你看完之后能够有所启发。这里要注意一点，看源码之前其实还有一件很重要的事情要做，就是你应该要用过Element之类的组件库，这点很重要，<strong>要先学会用，再去深究其原理。</strong></p> <p>很多东西只是我们平时碰的比较少，因为陌生所以也觉得难。想想我们平时开发过程中写的组件，那个也是源码啊，只不过写的可能没有那么好就是了。</p> <p>Element源码地址:<a href="https://github.com/ElemeFE/element" target="_blank" rel="noopener noreferrer">github.com/ElemeFE/ele…<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Element文档: <a href="https://element.eleme.io/#/zh-CN" target="_blank" rel="noopener noreferrer">element-cn.eleme.io/#/zh-CN/com…<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="关于目录"><a href="#关于目录" class="header-anchor">#</a> 关于目录</h4> <p><img src="/assets/img/169deab9d9b8f38e.47c83ba6.png" alt="16f879b5b51541a1"></p> <p>由于本文的重点是讲解组件的具体思路，只要知道组件源码在哪里就行了，所以整体目录就先不说了，当然有兴趣的同学们可以看一下下面的这篇文章：</p> <p>相关好文:<a href="https://juejin.im/post/6844903808787546125" target="_blank" rel="noopener noreferrer">基于 vue-cli3 打造属于自己的 UI 库<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="怎么看"><a href="#怎么看" class="header-anchor">#</a> 怎么看</h4> <p><strong>这里先简要说下我看组件源码的方法</strong>，仅供大家参考。</p> <p>首先Element有几个版本，我看的是基于Vue的版本，所以每个组件到底就是一个vue文件，就和我们平时工作写的代码一样，写好一个vue组件，然后在需要的页面引入即可。不过更重要的是要知道如何写好这个组件（健壮吗，可扩展吗，易维护吗等）。一个vue组件一般可分为三部分，template、script和style。在这里我们就不考虑style了，直接在页面引用Element的样式就好，因为这不是我们主要关心的，我们只要知道Element的样式一般是这样(el-组件名--状态，比如el-button--primary)命名的就行。所以我们组件里是没有写style部分的，这样做能帮我们省下好多时间和精力。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 直接在页面中引入 Element 的样式</span>
<span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">&quot;stylesheet&quot;</span> href<span class="token operator">=</span><span class="token string">&quot;https://unpkg.com/element-ui/lib/theme-chalk/index.css&quot;</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="先看template部分"><a href="#先看template部分" class="header-anchor">#</a> 先看template部分</h4> <p>那么接下来我们就先看看template的部分怎么写。其实这部分是很简单的（对于这个组件来说），我们可以先打开Element文档看一下button的外观样式，再来写这部分，它大概长下面这样。</p> <p><img src="/assets/img/169debbe07b34ef3.f8e80739.png" alt="16f879b5b51541a1"></p> <p>ok，假设你已经看过button组件的大部分外观，接下来我们就可以在脑海中先想一下（抽离并化简一下html结构的公共部分），大概就是一个<strong>div</strong>（button标签）里面包了一个<strong>i</strong>图标和<strong>span</strong>文件这样的结构，嗯好像是这样，那就试着写一个吧！（提示：Element组件一般最外层的样式都是用el-组件名 包起来的）</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>el-button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>看上面的结构像那么回事，也简单明了。不过，然后呢。。。然后就是我们的script部分啦，这个才是组件的灵魂所在，重中之重，也是需要我们去啃的部分。好在这个组件简单，让我们继续往下看吧。</p> <h4 id="再看script部分"><a href="#再看script部分" class="header-anchor">#</a> 再看script部分</h4> <p>我们看这部分的时候，可能无从下手，但其实还是有点门道的。不管神马组件，都有三个较为重要的组成部分：props、event和slot，这三个部分是组件对内对外沟通的桥梁，使得组件变得灵活起来。所以这三个api在发布之前一定构思好和确定好，因为后期再改就很难了，可以就是会牵一发动全身的样子。但后期对组件的处理其实不应该是这样的效果，而应该是不影响和改动之前的api,但又可以扩展和新增功能。ok，就让我们一个一个娓娓道来吧。首先看下props的部分，你需要在脑海中想象一下button组件的哪些内容是可变的（根据需要外部传参的改变而改变），不用着急往下看，先好好想一下。。。。。。</p> <ol><li><p>最明显的就是button的背景色吧，这显然是可变的，就是type;</p></li> <li><p>然后是有没有图标，就是icon;</p></li> <li><p>还有就是有没有禁用，就是disabled;</p></li> <li><p>再来看有没有圆角，就是round;</p></li> <li><p>尺寸大小也是可变的，就是size;</p></li> <li><p>好像按钮还可以是文本的样子，就是plain;</p> <p>......</p> <p>好了，那我们就试着写一下props部分吧！（注意:props的部分最好用对象的写法，这样能够对每个属性进行自定义设置，相比数组的写法，更为规范严谨)。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    size<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'medium'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    icon<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    disabled<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    plain<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    round<span class="token operator">:</span> Boolean
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>接下来是slot部分，如果不懂slot用法的同学可以先出门左拐学习一下再来。很明显，对于button组件来说，文本就是slot啦，所以template里面的内容可以小改一下，代码如下：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>el-button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>然后就是event部分，很显然啦，按钮能有什么功能呢，就是点击嘛，没了，所以它就一个事件，就是当按钮被点击的时候，我们需要触发一下事件向上传递，也就是$emit。于是乎，我们把事件添加到组件中，代码如下：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>el-button<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleClick<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">handleClick</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>好像event的部分就那么多，嗯，是的，比想像中的简单。。。。。。</p> <h4 id="再看template部分"><a href="#再看template部分" class="header-anchor">#</a> 再看template部分</h4> <p>你以为组件写完了，不，并没有，你不觉得template里面太空了么，而且props这部分的属性都还没用上呢（只是声明了一下），所以我们还需要完善点东西。。。比如slot部分吧，通过$slots.default我们可以获取到slot中的内容，不过这里需要加个判断，因为用户可能没有传文字，那我们就不用渲染了；又比如图标i的部分，和slot一样，有传值我们才渲染，所以也加个判断（这里icon的值为el-icon-图标名格式）。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>el-button<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleClick<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$slots.default<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>再看props中的属性，其实当中大部分都是用来控制样式变化的，比如type,size,round,disabled,plain等。。。所以就让我们为组件加上些class吧。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>el-button<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleClick<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>disabled<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[
      type ? <span class="token punctuation">'</span>el-button--<span class="token punctuation">'</span> + type : <span class="token punctuation">'</span><span class="token punctuation">'</span>,
      size ? <span class="token punctuation">'</span>el-button--<span class="token punctuation">'</span> + size : <span class="token punctuation">'</span><span class="token punctuation">'</span>,
      {
        <span class="token punctuation">'</span>is-disabled<span class="token punctuation">'</span>: disabled,
        <span class="token punctuation">'</span>is-plain<span class="token punctuation">'</span>: plain,
        <span class="token punctuation">'</span>is-round<span class="token punctuation">'</span>: round
      }
    ]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$slots.default<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>至此我们就写完了一个较为完整的button组件，是不是给人一种这么简单的么的感觉。虽然它还不够完善，但也覆盖了源码90%的部分，剩下的10%大家可以自己去补充补充。其实组件主要还是要看你思考得有多全面，想的越多写的越多。</p> <h4 id="结语"><a href="#结语" class="header-anchor">#</a> 结语</h4> <p>顺着上面的思路，我们就可以有了较为明了的方法去看Element其它组件的源码（应该会轻松一些吧）。当然这里仅仅只是起一个抛砖引玉的作用，主要还是因为button确实简单还实用，很适合敲门砖的角色，当然也许后面看到其它复杂的组件你就不会这样想了。但是不管怎么说，好的开始是成功的一半，革命尚未成功，同志仍需努力。撸起袖子加油干吧！！！</p></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/3/2021, 11:12:51 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/front/element/" class="prev router-link-active">
        目录
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8798bf52.js" defer></script><script src="/assets/js/2.309d842d.js" defer></script><script src="/assets/js/21.1dd47ea9.js" defer></script>
  </body>
</html>
